ESET Nod32 Update Mirror
=========

Средство для обновления зеркала антивируса Eset Nod32 с бесплатных серверов (для обновления с официальных серверов нужнодописать пару строк). Требования:

  - Сервер на Linux
  - Apache (тестировалось на версии 1.3.42)
  - PHP (тестировалось на версии 5.3)
  - Разрешение на запуск "shell_exec()" ('safe_mode' выключен)
  - Разрешение на запуск 'rm', 'mkdir', 'wget', 'mv' и 'find'

Всё что делает скрипт - это проверяет доступность сервера из массива:
```
function checkAvailability($url) {
    $urlHeaders = @get_headers($url);
    if(strpos($urlHeaders[0], '200') === false) {
        return false;
    } else {
        return true;
    }
}

foreach ($bases_urls_array as $baseUrl)
    if(checkAvailability($baseUrl)) {
        $workBaseUrl = $baseUrl;
        break;
    }
```

И формирует строку для запуска 'wget' с функцией рекруссивного скачивания, скачивания во временную папку, и заменой по завершению файлов в папке назначения.

Код не самый лучший, написан на коленке, но работает.

Версия
----

0.2.4

Оформление внешнего вида
-----------

![alt tag](http://oi60.tinypic.com/14o87lc.jpg)

Используется возможность модуля 'autoindex_module' сервера 'Apache'. Для настройки вывода редактируются 3 файла:

* **.htaccess** - 'IndexOptions' и продие директивы, отвечающие за вывод листинга
* **.header.html** - Верстка _перед_ выодом листинга
* **.footer.html** - Верстка _после_ листинга


Настройки
--------------
* **.update.php** - В начале файла секция настроек
* **.htaccess** - Разграничение доступа к зеркалу


**Автоматизация** - Добавьте запуск скрипта в 'cron' с интервалом запуска 2..3 раза в сутки

Ссылки
-----------
[Пост в блоге] об этом хабе

**Make love, not war!**

[Пост в блоге]:http://tmblr.co/ZYW79o1CrHcIG
