ESET Nod32 Update Mirror
=========

Скрипт для обновления зеркала антивируса Eset Nod32 с бесплатных серверов (для обновления с официальных серверов нужнодописать пару строк). Требования:

  - Сервер на Linux
  - Apache для показа морды и вывода листинга (тестировалось на версии 1.3.42)
  - Наличие и разрешение на запуск 'curl' (проверка состояния источника), 'wget' (скачивание источника), 'rm', 'mkdir', 'mv' и 'unrar' для работы с офф. зеркалами


Алгоритм работы скрипта следующий:
  1. Запрашиваем файл 'update.ver' по адресу (каждый массив = 1 адрес + логин + пароль); таким макаром проверяем каждый url
  2. Если файл не найден (HTTP заголовок ответа !== 200), то проверяем следующий; если проверять больше нечего - выходим
  3. Разбираем 'update.ver', выковыриваем имена файлов, пишем новый 'update.ver' (без путей к файлам), и 'wget'-ом выкачиваем файлы из 'update.ver' (только обновленные)
  4. Создаем файл-временную метку и 'robots.txt', запрещающий индексацию

Код не самый лучший, написан на коленке, но работает.

История изменений
----

* **0.3** - Полностью переписан SH скрипт, иной алгоритм работы
* **0.2.5-sh** - PHP версия более не поддерживается, скрипт переписан на bash
* **0.2.5** - Масса мелких исправлений в .htaccess и верстке
* **0.2.4** - Релиз на гитхабе

Оформление внешнего вида
-----------

![alt tag](http://oi60.tinypic.com/14o87lc.jpg)

Используется возможность модуля 'mod_autoindex.c' сервера 'Apache'. Для настройки вывода редактируются 3 файла:

* **.htaccess** - 'IndexOptions' и продие директивы, отвечающие за вывод листинга
* **.header.html** - Верстка _перед_ выодом листинга
* **.footer.html** - Верстка _после_ листинга


Настройки
--------------
* **update_nod32_mirror.sh** - В начале файла секция настроек
* **.htaccess** - Разграничение доступа к зеркалу


**Автоматизация** - Добавьте запуск скрипта в 'cron' с интервалом запуска 2..3 раза в сутки

Ссылки
-----------
[Пост в блоге] об этом хабе

**Make love, not war!**

[Пост в блоге]:http://tmblr.co/ZYW79o1CrHcIG
